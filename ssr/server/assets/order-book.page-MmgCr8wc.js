import{defineComponent as C,computed as r,ref as T,resolveComponent as b,unref as j,withCtx as k,createVNode as x,useSSRContext as O}from"vue";import{ssrInterpolate as z,ssrRenderComponent as a}from"vue/server-renderer";import{Screen as h}from"quasar";import{u as N,s as U,_ as B}from"../server-entry.js";import"pinia";import"quasar/wrappers/index.mjs";import"vue-router";const g=C({__name:"OrderBook",__ssrInlineRender:!0,setup(s){const e=N(),o=[{name:"price",label:"Цена",field:"price",align:"left"},{name:"quantity",label:"Кол-во",field:"quantity",align:"left"},{name:"total",label:"",field:"total",align:"left"}],i=r(()=>e.loading),m=r(()=>U[e.currencySymbol].label),y=r(()=>{const l=["price","quantity","total"],t=["price","quantity"];return h.lt.md?t:l}),P={sortBy:"desc",descending:!1,page:1,rowsPerPage:0},L={sortBy:"desc",descending:!1,page:1,rowsPerPage:0},d=T(e.limit),D=[100,500,1e3],I=r(()=>e.getLimitedOrdersList(d.value).asks),R=r(()=>e.getLimitedOrdersList(d.value).bids);function $(l){e.$patch({limit:l}),e.fetchDepthSnapshot(e.currencySymbol,l)}return(l,t,u,E)=>{const V=b("q-select"),w=b("q-table"),c=b("q-inner-loading");t('<!--[--><div class="order-book-header flex row no-wrap justify-between items-center" data-v-a28ca3f1><div class="text-h6 flex row no-wrap" data-v-a28ca3f1>'),j(h).gt.xs?t('<div class="text-no-wrap" data-v-a28ca3f1>Биржевой стакан —</div>'):t("<!---->"),t(`<span class="text-weight-light q-ml-xs" data-v-a28ca3f1>${z(m.value)}</span></div>`),t(a(V,{modelValue:d.value,"onUpdate:modelValue":[p=>d.value=p,$],options:D,label:"Глубина стакана",class:"table-size-select q-ml-xl","transition-show":"scale","transition-hide":"scale",filled:"",dense:""},null,u)),t('</div><div class="static-screen row" data-v-a28ca3f1><div class="col-6 relative-position" data-v-a28ca3f1>'),t(a(w,{title:"Ордер на покупку",rows:R.value,columns:o,"visible-columns":y.value,pagination:L,loading:i.value,class:"order-table order-table--bids sticky-head","title-class":"table-title table-title--bids",dense:"",flat:"",square:"",bordered:"","hide-pagination":"","hide-no-data":"","virtual-scroll":""},{loading:k((p,n,v,f)=>{if(n)n(a(c,{showing:"",color:"primary"},null,v,f));else return[x(c,{showing:"",color:"primary"})]}),_:1},u)),t('</div><div class="col-6 relative-position" data-v-a28ca3f1>'),t(a(w,{title:"Ордер на продажу",rows:I.value,columns:o,"visible-columns":y.value,pagination:P,loading:i.value,class:"order-table order-table--asks sticky-head","title-class":"table-title table-title--asks",dense:"",flat:"",square:"",bordered:"","hide-pagination":"","hide-no-data":"","virtual-scroll":""},{loading:k((p,n,v,f)=>{if(n)n(a(c,{showing:"",color:"primary"},null,v,f));else return[x(c,{showing:"",color:"primary"})]}),_:1},u)),t("</div></div><!--]-->")}}}),q=g.setup;g.setup=(s,e)=>{const o=O();return(o.modules||(o.modules=new Set)).add("src/components/OrderBook.vue"),q?q(s,e):void 0};const A=B(g,[["__scopeId","data-v-a28ca3f1"],["__file","OrderBook.vue"]]),_=C({name:"OrderBookPage",__name:"order-book.page",__ssrInlineRender:!0,setup(s){return(e,o,i,m)=>{o(a(A,m,null,i))}}}),S=_.setup;_.setup=(s,e)=>{const o=O();return(o.modules||(o.modules=new Set)).add("src/pages/order-book.page.vue"),S?S(s,e):void 0};const W=B(_,[["__file","order-book.page.vue"]]);export{W as default};
